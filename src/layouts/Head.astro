---
import metaData from '@data/meta/meta.json';
import type { Locale } from '@typings/global';

const locale = Astro.currentLocale as Locale;

const meta = metaData[locale];
---

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width" />

  <link rel="icon" type="image/svg+xml" href="/favicon-light.svg" media="(prefers-color-scheme: dark)" />
  <link rel="icon" type="image/svg+xml" href="/favicon-dark.svg" media="(prefers-color-scheme: light)" />

  <meta name="theme-color" content="#121212" media="(prefers-color-scheme: light)" />
  <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: dark)" />

  <meta property="og:title" content={meta.title} />
  <meta property="og:description" content={meta.description} />
  <meta property="og:image" content="/opengraph.jpg" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:url" content={meta.link} />
  <meta property="og:type" content="website" />

  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content={meta.title} />
  <meta name="twitter:description" content={meta.description} />
  <meta name="twitter:image" content="/opengraph.jpg" />

  <title>{meta.title}</title>
  <script>
    import { updateTheme, subscribeToSystemThemeChange, type Theme } from '@utils/theme';
    const savedTheme = (localStorage.getItem('theme') ?? 'system') as Theme;
    updateTheme(savedTheme);

    subscribeToSystemThemeChange(() => {
      const current = localStorage.getItem('theme') ?? 'system';
      if (current !== 'auto' && current !== 'system') return;
      updateTheme('system');
    });
  </script>
</head>
